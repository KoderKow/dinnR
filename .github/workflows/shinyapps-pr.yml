name: PR
# Run on all pull requests
on:
pull_request: {}

 # Build image
- name: Build image
run: docker build -t pullrequestimage .
# run the image (but supply the TESTNAME in stead of MASTERNAME, so the
# app ends up in a different place.
- name: execute
run: >
docker run
-e SHINY_ACC_NAME=${{secrets.SHINY_ACC_NAME}}
-e TOKEN=${{secrets.TOKEN}}
-e SECRET=${{secrets.SECRET}}
-e MASTERNAME=${{secrets.TEST_NAME}}
pullrequestimage